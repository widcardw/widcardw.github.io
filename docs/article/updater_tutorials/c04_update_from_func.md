---
title: updater æ–‡æ¡£ | ç¬¬ 4 èŠ‚ Alpha åœ¨åŠ¨ç”»ä¸­çš„ä½œç”¨
date: 2022-07-03
tag: ['manim','updater','æ•™ç¨‹']
category: manim
article: true
---

ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ **WIP** ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§

# ç¬¬ 4 èŠ‚ Alpha åœ¨åŠ¨ç”»ä¸­çš„ä½œç”¨

## ç¢ç¢å¿µ

å¦‚æœæ˜¯çœ‹è¿‡æˆ‘ B ç«™è§†é¢‘çš„åŒå­¦ï¼Œåº”è¯¥ä¼šå‘ç°æˆ‘æŠŠè¿™éƒ¨åˆ†é¡ºåºç¨å¾®è°ƒæ•´äº†ä¸€ä¸‹ï¼Œä½†å…¶å®ä¹Ÿæ— ä¼¤å¤§é›…ï¼Œæ¯•ç«Ÿä¸€æ—¦æƒ³å­¦ä¼šä½¿ç”¨ updater ï¼Œé‚£ä¹ˆå°±å¿…ç„¶éœ€è¦é˜…è¯»æºç ï¼Œè€Œè¿™éƒ¨åˆ†æ–‡æ¡£å®é™…ä¸Šå°±æ˜¯å¸¦é¢†è¯»è€…å»é˜…è¯» manim æºç ï¼Œäº†è§£åŠ¨ç”»çš„å·¥ä½œåŸç†ã€‚

å‰é¢æˆ‘ä»¬ä¹Ÿå¸¸å¸¸æåˆ°ä¸€ä¸ªè¯å«åš==æ’å€¼==ï¼Œè€Œæˆ‘ä»¬ä¸€èˆ¬å°†å®ƒçš„æ³›å‹å®šä¹‰æˆè¿™æ ·

```python
def interpolate(start: T, end: T, alpha: float) -> T:
    return (1. - alpha) * start + alpha * end
```

ä½†æ˜¯æˆ‘ä»¬å‰é¢ä¹Ÿæ²¡æœ‰å»æåˆ°å…³äº alpha çš„å†…å®¹ï¼Œè¿™ä¸€èŠ‚å°†ä¼šå°è¯•è®²è§£è¿™ä¸€å›°æƒ‘ã€‚

## Alpha çš„å«ä¹‰

å¯èƒ½æˆ‘ä»¬åœ¨å›¾åƒå¤„ç†çš„æ—¶å€™å¬è¯´è¿‡ä¸€ä¸ª â€œalpha é€šé“â€ çš„æ¦‚å¿µï¼Œå…¶å®å°±æ˜¯æŒ‡é€æ˜åº¦é€šé“ã€‚è€Œå®ƒçš„å–å€¼èŒƒå›´æ˜¯ 0%~100%ï¼Œä¹Ÿå°±æ˜¯ $[0,1]$ã€‚

å¦‚æœæˆ‘ä»¬å°è¯•å°†è¿™ä¸ªå€¼å¸¦å…¥åˆ°ä¸Šé¢çš„å‡½æ•°å®šä¹‰ä¸­ï¼Œå‘ç°å®ƒè¿”å›çš„æ˜¯ start ä¸ end ä¹‹é—´çš„ä¸€ä¸ª==ä¸­é—´å€¼==ã€‚è€Œ==è¡¥å…¨ä¸­é—´å€¼==å…¶å®å°±æ˜¯==è¡¥é—´åŠ¨ç”»==çš„ä¸€ä¸ªé‡è¦ä»»åŠ¡äº†ï¼Œå®ƒè®©ç”»é¢çš„åˆ‡æ¢å˜å¾—çœ‹èµ·æ¥æ›´åŠ å¹³æ»‘ï¼Œè€Œä¸ä¼šéå¸¸ç”Ÿç¡¬ã€‚

## åŠ¨ç”»çš„æ‰§è¡Œæµç¨‹

æˆ‘ä»¬å†å›å¿†ä¸€ä¸‹ç¬¬ 1 èŠ‚çš„å†…å®¹ï¼ŒAnimation ç±»ç¼–å†™äº†å¾ˆå¤šæ–¹æ³•ï¼Œåœ¨ Scene è°ƒç”¨ play çš„æ—¶å€™ï¼Œä¼šæŒ‰ä¸€å®šçš„é¡ºåºå’Œé€»è¾‘å»è°ƒç”¨ Animation çš„è¿™äº›æ–¹æ³•ã€‚æ­¤æ—¶æˆ‘ä»¬å…³æ³¨çš„å°±æ˜¯å…¶ä¸­å®é™…çš„åŠ¨ç”»éƒ¨åˆ†äº†ã€‚

```python {8-10}
def progress_through_animations(self, animations: Iterable[Animation]) -> None:
    last_t = 0
    for t in self.get_animation_time_progression(animations):
        dt = t - last_t
        last_t = t
        for animation in animations:
            animation.update_mobjects(dt)
            alpha = t / animation.run_time
            # åŠ¨ç”»æ’å€¼
            animation.interpolate(alpha)
        self.update_frame(dt)
        self.emit_frame()
```

Animation çš„æ–¹æ³•æ–¹æ³•ä¸€å±‚å¥—ä¸€å±‚ï¼Œæœ€ç»ˆä¼šåˆ°è¾¾ `interpolate_mobject` å’Œ `interpolate_submobject` è¿™ä¸¤ä¸ªæ–¹æ³•èº«ä¸Šã€‚æˆ‘ä»¬æ¥çœ‹ manim ä¸­æœ€å¸¸ç”¨çš„æ–¹æ³• Transform ï¼Œå®ƒæ˜¯æ€ä¹ˆå®ç°çš„ï¼š

```python {8}
    def interpolate_submobject(
        self,
        submob: Mobject,
        start: Mobject,
        target_copy: Mobject,
        alpha: float
    ):
        submob.interpolate(start, target_copy, alpha, self.path_func)
        return self
```

æ²¡é”™ï¼Œè¦åšçš„äº‹æƒ…å°±åªæœ‰ä¸€è¡Œï¼ä»ä¸­åº”è¯¥å¯ä»¥æƒ³è±¡åˆ° Transform çš„å®ç°æœ‰å¤šä¹ˆç®€å•ç²—æš´ï¼Œåªéœ€è¦ä½¿å¾—åœ¨å±å¹•ä¸Šçš„ç‰©ä»¶æˆä¸º==èµ·å§‹å’Œç›®æ ‡çš„ä¸­é—´å€¼==å°±å¯ä»¥äº†ã€‚

å…¶å®è¿™ä¹ˆä¸€æ¥ï¼Œè®¸å¤šå·¥ä½œå°±è½åˆ°äº† `begin` å’Œ `finish` å¤´ä¸Šã€‚å®ƒä»¬è¦å®Œæˆçš„å·¥ä½œï¼ŒåŒ…æ‹¬æ£€æŸ¥åˆæ³•æ€§ã€==å¯¹é½èµ·å§‹ç‰©ä»¶å’Œç›®æ ‡ç‰©ä»¶çš„æ•°æ®==ã€ä»¥åŠä¸€äº›ä¼˜åŒ–é—®é¢˜ã€‚

å…¶ä¸­ï¼Œç¬¬äºŒä¸ªæ­¥éª¤åº”å½“æ˜¯åœ¨è¿è¡Œè¿›ç¨‹ä¸­æ¯”è¾ƒå…³é”®çš„æ­¥éª¤ã€‚ä¸å¦¨å‡è®¾æœ‰ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š

>[!example] ç»™å®šä¸¤ä¸ªä»»æ„çŸ©é˜µï¼Œå°è¯•ç»™å‡ºè¿™ä¸¤ä¸ªçŸ©é˜µçš„ 0.5 å¤„çš„æ’å€¼
>åˆ«çœ‹äº†ï¼Œè¿™é‡Œé¢æ²¡ç­”æ¡ˆ

è¿™ä¹ˆå¬çš„ç¡®æ˜¯å¼ºäººæ‰€éš¾ï¼Œå¦‚æœä¸¤ä¸ªçŸ©é˜µä¸ä¸€æ ·å¤§ï¼Œé‚£ä¹ˆæ ¹æœ¬å°±ä¸å¯èƒ½è¿›è¡Œæ’å€¼ã€‚

åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œ==æ•°æ®å¯¹é½==çš„ä½œç”¨å°±æ˜¾å¾—ç›¸å½“é‡è¦äº†ã€‚å¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸¤ä¸ªçŸ©é˜µéƒ½è¿›è¡Œæ‰©å±•ï¼Œä½¿å¾—æ–°çš„çŸ©é˜µå¤§å°éƒ½èƒ½è¦†ç›–ä¸¤ä¸ªçŸ©é˜µï¼Œæ¥ç€å¯¹ä¸€äº›ç¼ºå¤±çš„æ•°æ®è¿›è¡Œä¿®è¡¥ï¼Œé‚£ä¹ˆæ­¤æ—¶ä¸€ä¸ªçŸ©é˜µä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½èƒ½ä¸å¦ä¸€ä¸ªçŸ©é˜µä¸­çš„ç›¸åº”å€¼å½¢æˆ==ä¸€ä¸€æ˜ å°„==ï¼Œè¿™æ ·æ’å€¼åŠ¨ç”»å°±å¯ä»¥ç•…é€šæ— é˜»äº†ã€‚

```mermaid
graph LR
begin -->a["æ£€æŸ¥"] --> b["æ•°æ®å¯¹é½"] --> c["æ‹·è´å˜é‡"] 
c --> d["lock data<br>ä¼˜åŒ–"] --> e["æ’å€¼<br>interpolate<br>mobject"]
e --> f["unlock data"] --> g["finish"]
```


